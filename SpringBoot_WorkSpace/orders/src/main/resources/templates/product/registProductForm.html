<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>Insert title here</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
	crossorigin="anonymous" />
</head>
<body>
	<div class="container" style="max-width: 600px">
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<!-- 상단 바 -->

			<div class="container p-3">
				<a class="navbar-brand" href="/">Orders Project</a>
				<button class="navbar-toggler" type="button"
					data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
					aria-controls="navbarSupportedContent" aria-expanded="false"
					aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
						<li class="nav-item"><a class="nav-link" href="#">임시</a></li>
						<li class="nav-item"><a class="nav-link" href="#">임시</a></li>
					</ul>
				</div>
			</div>
		</nav>
		<!-- 메뉴 버튼 -->
		<div class="row mt-5">
			<h1 class="text-center mb-4 fw-bold">상품 등록</h1>
			<form action="/product/regist" method="post"
				th:object="${productForm}">
				<div class="mb-3">
					<label for="pname" class="form-label">상품명</label>
					<!-- th:field = "*{필드명}" >> id, name, value 속성을 자동으로 추가 -->
					<!-- is-invalid : 오류가 있을 때 추가할 class -->
					<input type="text" class="form-control" th:field="*{pname}"
						th:classappend="${#fields.hasErrors('pname')}? 'is-invalid'" />
					<!-- th:classappend="조건식? '추가할 클래스명'" : 조건문이 true이면 '추가할 클래스명'을 클래스 목록에 추가 -->
					<p class="invalid-feedback" th:if="${#fields.hasErrors('pname')}"
						th:errors="*{pname}">Incorrect date</p>
				</div>
				<div class="mb-3">
					<label for="pprice" class="form-label">상품 가격</label>
					<!-- th:field = "*{필드명}" >> id, name, value 속성을 자동으로 추가 -->
					<!-- is-invalid : 오류가 있을 때 추가할 class -->
					<input type="text" class="form-control" th:field="*{pprice}"
						th:classappend="${#fields.hasErrors('pprice')}? 'is-invalid'" />
					<!-- th:classappend="조건식? '추가할 클래스명'" : 조건문이 true이면 '추가할 클래스명'을 클래스 목록에 추가 -->
					<p class="invalid-feedback" th:if="${#fields.hasErrors('pprice')}"
						th:errors="*{pprice}">Incorrect date</p>
				</div>
				<div class="mb-3">
					<label for="ptype" class="form-label">상품 종류</label>
					<!-- th:field = "*{필드명}" >> id, name, value 속성을 자동으로 추가 -->
					<!-- is-invalid : 오류가 있을 때 추가할 class -->
					<select class="form-select" th:field="*{ptype}">
						<option value="가전">가전</option>
						<option value="식품">식품</option>
						<option value="기타">기타</option>
					</select>
				</div>
				<div class="mb-3">
					<label for="pinfo" class="form-label">상품 정보</label>
					<!-- th:field = "*{필드명}" >> id, name, value 속성을 자동으로 추가 -->
					<!-- is-invalid : 오류가 있을 때 추가할 class -->
					<input type="text" class="form-control" th:field="*{pinfo}" />
				</div>
				<button type="submit" class="btn btn-primary w-100">상품등록</button>
			</form>
		</div>
	</div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
		crossorigin="anonymous"></script>
	<script
		src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
	<script>
		//본 예제에서는 도로명 주소 표기 방식에 대한 법령에 따라, 내려오는 데이터를 조합하여 올바른 주소를 구성하는 방법을 설명합니다.
		function execDaumPostcode() {
			new daum.Postcode(
					{
						oncomplete : function(data) {
							// 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

							// 도로명 주소의 노출 규칙에 따라 주소를 표시한다.
							// 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
							var roadAddr = data.roadAddress; // 도로명 주소 변수
							var extraRoadAddr = ""; // 참고 항목 변수

							// 법정동명이 있을 경우 추가한다. (법정리는 제외)
							// 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
							if (data.bname !== ""
									&& /[동|로|가]$/g.test(data.bname)) {
								extraRoadAddr += data.bname;
							}
							// 건물명이 있고, 공동주택일 경우 추가한다.
							if (data.buildingName !== ""
									&& data.apartment === "Y") {
								extraRoadAddr += extraRoadAddr !== "" ? ", "
										+ data.buildingName : data.buildingName;
							}
							// 표시할 참고항목이 있을 경우, 괄호까지 추가한 최종 문자열을 만든다.
							if (extraRoadAddr !== "") {
								extraRoadAddr = " (" + extraRoadAddr + ")";
							}

							// 우편번호와 주소 정보를 해당 필드에 넣는다.
							document.getElementById("mpostcode").value = data.zonecode;
							document.getElementById("mroadAddress").value = roadAddr;
							document.getElementById("mjibunAddress").value = data.jibunAddress;

							// 참고항목 문자열이 있을 경우 해당 필드에 넣는다.
							if (roadAddr !== "") {
								document.getElementById("mextraAddress").value = extraRoadAddr;
							} else {
								document.getElementById("mextraAddress").value = "";
							}

							var guideTextBox = document.getElementById("guide");
							// 사용자가 '선택 안함'을 클릭한 경우, 예상 주소라는 표시를 해준다.
							if (data.autoRoadAddress) {
								var expRoadAddr = data.autoRoadAddress
										+ extraRoadAddr;
								guideTextBox.innerHTML = "(예상 도로명 주소 : "
										+ expRoadAddr + ")";
								guideTextBox.style.display = "block";
							} else if (data.autoJibunAddress) {
								var expJibunAddr = data.autoJibunAddress;
								guideTextBox.innerHTML = "(예상 지번 주소 : "
										+ expJibunAddr + ")";
								guideTextBox.style.display = "block";
							} else {
								guideTextBox.innerHTML = "";
								guideTextBox.style.display = "none";
							}
						},
					}).open();
		}
	</script>
	<!-- <script>
      function checkEl(formEl) {
        const input_id = formEl.mid.value;
        const input_pw = formEl.mpw.value;
        if (input_id.length <= 0) {
          console.log("id 미입력");
          alert("아이디를 입력해주십시오");
          return false;
        }
        if (input_pw.length <= 0) {
          console.log("pw 미입력");
          alert("비밀번호를 입력해주십시오");
          return false;
        }
        return true;
      }
    </script>  -->
</body>
</html>
